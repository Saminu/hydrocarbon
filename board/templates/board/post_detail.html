{% extends 'board/post_list.html' %}
{% load hc %}
{% load i18n %}
{% load intcomma from humanize %}

{% block post %}

<div class="section article">
	<div class="item">
		<div class="header">
			<div class="title">
				<span class="category">{{ post.category }}</span>
				<h2>{{ post.title }}</h2>
				{% if item.comments.count != 0 %}
					<a href="#" class="label meta comments">
						<span class="icon"></span>
						<span class="text">{{ post.comments.count }}</span>
					</a>
				{% endif %}
			</div>
			<div class="meta">
				<span class="label meta 
				{% if post.user %}
					author user">
				{% else %}
					author guest" title="{{ post.ipaddress }}">
				{% endif %}
					<span class="icon"></span>
					<span class="text"><span>{{ post.author }}</span></span>
				</span>
				<span class="label meta timestamp" title="{{ post.created_time | date:'DATE_FORMAT' }} {{ post.created_time | date:'H:i:s' }}">
					<span class="icon"></span>
					<span class="text"><span>{{ post.created_time | timesince | split_first }} {% trans "ago" %}</span></span>
				</span>
				<span class="label meta score" title="+{{ post.votes.upvote | intcomma }} / -{{ post.votes.downvote | intcomma }}">
					<span class="icon"></span>
					<span class="text">
						{% blocktrans with counter=post.votes.total|intcomma %}
							<span>{{ counter }}</span> votes
						{% endblocktrans %}
					</span>
				</span>
				<span class="label meta views">
					<span class="icon"></span>
					<span class="text">
						{% blocktrans with counter=post.viewcount|intcomma %}
							<span>{{ counter }}</span> views
						{% endblocktrans %}
					</span>
				</span>
			</div>
		</div>
		<div class="article">
			{{ post.contents | safe }}
		</div>

		<div class="vote vote-post" data-target-id="{{ post.id }}">
			<a href="#upvote" class="upvote vote-post{% if voted.upvoted %} voted{% endif %}">
				<span class="icon"></span>
				<span class="text">{% trans "Upvote" %}</span>
			</a>
			<a href="#downvote" class="downvote vote-post{% if voted.downvoted %} voted{% endif %}">
				<span class="icon"></span>
				<span class="text">{% trans "Downvote" %}</span>
			</a>
		</div>
		<div class="footer clear">
			<div class="comments">
				<div class="left">
					<a href="#" class="label meta comments">
						<span class="icon"></span>
						<span class="text">{% blocktrans count counter=post.comments.count|intcomma %}There is {{ counter }} comment.{% plural %}There are {{ counter }} comments.{% endblocktrans %}</span>
					</a>
				</div>
				<div class="right">
					<a href="#" class="label meta refresh">
						<span class="icon"></span>
						<span class="text">{% trans "Refresh" %}</span>
					</a>
				</div>
			</div>
		</div>
	</div>

	<div class="comments-list">
		{# for #}
		<div class="comment">
		{# nested:  style="margin-left:20px;" #}
			<div class="bubble item">
				<div class="vote vote-comment" data-target-id="{{ comment.id }}">
					<a href="#upvote" class="upvote vote-comment" title="{% trans "Upvote" %}">&#9650;</a>
					<a href="#downvote" class="downvote vote-comment" title="{% trans "Downvote" %}">&#9660;</a>
				</div>
				<div class="container">
					<div class="header">
						<span class="meta author" title="user, ipaddress">user.profile.nick</span>
						<span class="meta timestamp" title="created_time">created_time|timesince</span>
						<span class="meta score">
							<span class="text"><span>2</span></span>
						</span>
						<div class="right">
							<a class="button meta report" href="#"><span>Report</span></a>
							<a class="button meta delete" href="#"><span>Delete</span></a>
							<a class="button meta modify" href="#"><span>Modify</span></a>
							<a class="button meta comment" href="#"><span>Comment</span></a>
						</div>
					</div>
					<div class="comment_contents">asd</div>
				</div>
			</div>
		</div>
		{# endfor #}

		<div class="comment owned">
			<div class="bubble">
				<div class="vote">
				</div>
				<div class="container">
					<div class="comment_contents">
						<textarea>{% trans "Please write your reply here." %}</textarea>
						<div class="nav" style="display:block;">
							<div class="right">
								<a href="#" class="button blue">{% trans "Submit comment" %}</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="nav clear">
		<div class="left">
			<a href="{{ board.get_absolute_url }}" class="button">{% trans "List" %}</a>
			<a href="{{ board.get_absolute_url }}best" class="button toppost">{% trans "Top Posts" %}</a>
		</div>
		<div class="right">
			<a href="{{ post.get_absolute_url }}/delete" class="button">{% trans "Delete" %}</a>
			<a href="{{ post.get_absolute_url }}/modify" class="button">{% trans "Modify" %}</a>
			<a href="{{ board.get_absolute_url }}newpost" class="button blue">{% trans "New Post" %}</a>
		</div>
	</div>
</div>

{% endblock %}
